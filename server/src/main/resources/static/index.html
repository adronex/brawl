<!DOCTYPE html>

<html data-ng-app="clockworks">
<head>
    <title>Clockworks</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <script src="lib/angular.js"></script>
    <script src="js/app.js"></script>
</head>
<body>

<div data-ng-controller="squadMenuController">
    <div id="newShit"
         data-ng-init="onLoad()">
    </div>

    <div id="menu">
        <p>Squads: </p>
        <div id="squads">
            <div data-ng-repeat="(index, squad) in availableSquads">
                <input type="radio"
                       data-ng-model="temp[index]"
                       data-ng-value="squad.id"
                       data-ng-change="temp.chosenSquadId = temp[index]">
                {{squad.name}}
            </div>
        </div>
        <button type="button" data-ng-click="openSocket()">Open</button>
    </div>
    <div id="game" style="display: none">
        <button type="button" data-ng-click="sendMulliganInfo();">Choose heroes</button>
        <button type="button" data-ng-click="sendFirstSpell();">Cast first spell</button>
        <button type="button" data-ng-click="closeSocket()">Close</button>
    </div>
</div>
<!-- Server responses get written here -->
<div id="gameState"></div>
<div id="queue"></div>
<div id="messages"></div>

<!-- Script to utilise the WebSocket -->
<script type="text/javascript">
    'use strict';

    var messagesDiv = document.getElementById("messages");
    var queueDiv = document.getElementById("queue");
    var gameStateDiv = document.getElementById("gameState");

//    fetch('/api/squads/my', {credentials: 'include'})
//            .then(function (response) {
//
//                return response.json();
//            })
//            .then(function (squads) {
//                if (squads) {
//                    let squadsDiv = document.getElementById("squads");
//                    squads.forEach(function (element, index) {
//                        squadsDiv.innerHTML += '<input type="radio" name="squad" value="' +
//                                element.id +
//                                (index === 0 ? '" checked>' : '">') +
//                                element.name + '<br>';
//                    });
//                }
//            })
//            .catch(alert);




</script>

</body>
</html>